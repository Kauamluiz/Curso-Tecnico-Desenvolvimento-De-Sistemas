USE DBDELEGACIA;

/*CRIME 2*/
ALTER TABLE CRIME ADD COLUMN DTCRIME DATE;
ALTER TABLE CRIME ADD PRIMARY KEY (IDCRIME);

/*CRIMINOSO 2*/
ALTER TABLE CRIMINOSO ADD COLUMN NOME VARCHAR(45);
ALTER TABLE CRIMINOSO ADD COLUMN IDCRIMINOSO INT PRIMARY KEY;

/*1*/
DROP TABLE ITEM_OCORRENCIA;
/*1*/
DROP TABLE OCORRENCIA;

/*VITIMA 2*/
ALTER TABLE VITIMA ADD COLUMN IDVITIMA INT NOT NULL AUTO_INCREMENT;
ALTER TABLE VITIMA ADD PRIMARY KEY (IDVITIMA);

/*COMETE 3*/
ALTER TABLE COMETE ADD PRIMARY KEY (IDCRIME, IDCRIMINOSO);
ALTER TABLE COMETE ADD FOREIGN KEY (IDCRIME) REFERENCES CRIME (IDCRIME);
ALTER TABLE COMETE ADD FOREIGN KEY (IDCRIMINOSO) REFERENCES CRIMINOSO (IDCRIMINOSO);

/*ATACA 6*/
ALTER TABLE ATACA ADD COLUMN IDVITIMA INT;
ALTER TABLE ATACA ADD COLUMN IDCRIMINOSO INT;
ALTER TABLE ATACA ADD PRIMARY KEY (IDVITIMA, IDCRIMINOSO);
ALTER TABLE ATACA ADD FOREIGN KEY (IDVITIMA) REFERENCES VITIMA (IDVITIMA);
ALTER TABLE ATACA ADD FOREIGN KEY (IDCRIMINOSO) REFERENCES CRIMINOSO (IDCRIMINOSO);
ALTER TABLE ATACA DROP COLUMN OBSERVACAO;

/*SOFRE 3*/
ALTER TABLE SOFRE ADD PRIMARY KEY (IDCRIME, IDVITIMA);
ALTER TABLE SOFRE ADD FOREIGN KEY (IDCRIME) REFERENCES CRIME (IDCRIME);
ALTER TABLE SOFRE ADD FOREIGN KEY (IDVITIMA) REFERENCES VITIMA (IDVITIMA);

/*ARMA 4*/
ALTER TABLE ARMA ADD COLUMN DESCRICAO VARCHAR(45);
ALTER TABLE ARMA ADD COLUMN IDENTIFICACAO VARCHAR(15);
ALTER TABLE ARMA ADD COLUMN TIPO ENUM('ARMA BRANCA', 'ARMA FOGO');
ALTER TABLE ARMA DROP COLUMN MARCA;

/*USADA 3*/
ALTER TABLE USADA ADD PRIMARY KEY (IDARMA, IDCRIME);
ALTER TABLE USADA ADD FOREIGN KEY (IDARMA) REFERENCES ARMA (IDARMA);
ALTER TABLE USADA ADD FOREIGN KEY (IDCRIME) REFERENCES CRIME (IDCRIME);


